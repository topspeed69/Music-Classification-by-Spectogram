# Data Configuration for Audio Processing and Augmentation

data:
  # Audio settings
  audio:
    sample_rate: 22050      # Sample rate for audio
    duration: 30            # Audio duration in seconds
    n_fft: 2048            # FFT window size
    hop_length: 512        # Hop length for STFT
    n_mels: 128            # Number of mel frequency bins
    fmin: 0                # Minimum frequency
    fmax: 8000             # Maximum frequency
  
  # Spectrogram settings
  spectrogram:
    type: "mel"            # Options: 'mel', 'linear', 'cqt'
    power: 2.0             # Power spectrogram
    log_scale: true        # Apply log scaling
    ref: 1.0               # Reference value for dB calculation
    amin: 1e-10            # Minimum amplitude threshold
    top_db: 80             # Top dB value for normalization
  
  # Dataset split ratios
  split:
    train: 0.8
    validation: 0.1
    test: 0.1
    shuffle: true
    stratify: false        # Stratify by labels if available
  
  # Data loading
  dataloader:
    batch_size: 32         # Reduced from 128 to 32 to avoid CUDA OOM
    num_workers: 4
    pin_memory: true
    shuffle_train: true
    shuffle_val: false
    drop_last: true        # Drop incomplete batches
    prefetch_factor: 2     # Prefetch batches per worker

# Augmentation Configuration
augmentation:
  # Number of augmentations to apply per sample
  num_augmentations: 3      # Apply 3 random augmentations
  apply_probability: 0.8    # Probability to apply augmentation pipeline
  
  # Individual augmentation settings
  transforms:
    # 1. Random Crop - DISABLED for consistent CNN input sizes
    random_crop:
      enabled: false
      probability: 0.8
      crop_size: [96, 970]  # [height, width] - 75% of original
      scale: [0.7, 1.0]     # Random scale range
      ratio: [0.75, 1.33]   # Aspect ratio range
    
    # 2. Color Jitter (Intensity variations)
    color_jitter:
      enabled: true
      probability: 0.8
      brightness: 0.4       # Brightness adjustment range
      contrast: 0.4         # Contrast adjustment range
      saturation: 0.4       # Saturation adjustment range
      hue: 0.1              # Hue adjustment range
    
    # 3. Gaussian Noise
    gaussian_noise:
      enabled: true
      probability: 0.8
      mean: 0.0
      std: 0.05             # Standard deviation of noise
      noise_type: "additive" # Options: 'additive', 'multiplicative'
    
    # 4. Horizontal Flip (Time reversal)
    horizontal_flip:
      enabled: true
      probability: 0.5      # 50% chance to flip
    
    # 5. Frequency Masking (SpecAugment)
    frequency_masking:
      enabled: true
      probability: 0.8
      max_mask_percentage: 0.15  # Max 15% of frequency bins
      num_masks: 2          # Number of frequency masks
    
    # 6. Time Masking (SpecAugment)
    time_masking:
      enabled: true
      probability: 0.8
      max_mask_percentage: 0.15  # Max 15% of time steps
      num_masks: 2          # Number of time masks
    
    # Additional augmentations (optional)
    random_rotation:
      enabled: false
      probability: 0.3
      degrees: [-5, 5]      # Rotation range in degrees
    
    gaussian_blur:
      enabled: false
      probability: 0.3
      kernel_size: 3
      sigma: [0.1, 2.0]

  # Normalization (applied after augmentation)
  normalization:
    mean: [0.485, 0.456, 0.406]  # ImageNet mean (for RGB)
    std: [0.229, 0.224, 0.225]   # ImageNet std
    
  # Resize settings
  resize:
    enabled: true
    height: 128
    width: 1293
    interpolation: "bilinear"  # Options: 'bilinear', 'bicubic', 'nearest'

# Data preprocessing
preprocessing:
  # Convert grayscale to RGB
  convert_to_rgb: true
  
  # Normalization method
  normalize_method: "standardize"  # Options: 'standardize', 'min_max', 'none'
  
  # Data type
  dtype: "float32"
  
  # Cache spectrograms in memory (for small datasets)
  cache_data: false

# Paths
paths:
  audio_dataset: "AudioToSpectogram/fma_small_dataset"
  spectrogram_dir: "AudioToSpectogram/output_mel"
  train_list: "data/train_files.txt"
  val_list: "data/val_files.txt"
  test_list: "data/test_files.txt"
